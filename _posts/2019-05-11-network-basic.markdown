---
layout: post
title:  "Network Basic"
date:   2019-05-11 10:03:00
author: Juhyeok Bae
categories: Network
---

# OSI 7 계층
네트워크에는 각 역할별로 계층을 나누어둔 OSI 7 계층이라는 모델이 존재한다. 송/수신하는 모든 데이터들은 이 과정들을 거친다. 계층별로 나누기 때문에 각 과정에서 일어나는 일을 파악 하기도 쉽고, 흐름을 한눈에 이해 하기도 쉽다.
- 1계층 - 물리 계층
- 2계층 - 데이터링크 계층
- 3계층 - 네트워크 계층
- 4계층 - 전송 계층
- 5계층 - 세션 계층
- 6계층 - 표현 계층
- 7계층 - 응용 계층

# 서브넷팅
3계층 부터는 IP를 사용 하는데

- subnet mask의 역할
  모든 IP는 네트워크 부분과 호스트 부분을 가진다. 이 부분을 나누어 주는게 서브넷 마스크이다.
  Network 부분은 각 아이피가 어떤 네트워크에 속해 있는지를 판단하는 기준이며, 이 부분은 변하지 않는다.
  Host 부분은 변할 수 있는 부분이며 한 네트워크 내에 두대의 서버가 있다면, 네트워크 부분은 같지만 호스트부분은 다른 값을 갖게 된다. 참고로 각 네트워크에는 예약된 두개의 IP가 존재한다. host 부분을 모두 0으로 채우게 되면 network ip, host 부분을 모두 1로 채우게 되면 broadcast ip이다.
  ```
  IP = 10.0.0.0/8
  Address = 0000 1010. 0000 0000. 0000 0000. 0000 0000
  Netmask = 1111 1111. 0000 0000. 0000 0000. 0000 0000
  ```

- Q1. 10.8.0.1/16과 10.8.255.0/16은 같은 네트워크에 속하는가?
  ```
  IP      = 10.8.0.1/16
  IP      = 10.  0000 1000. 0000 0000. 0000 0001
  S/M     = 255. 1111 1111. 0000 0000. 0000 0000
  Network = 10.  0000 1000. 0000 0000. 0000 0000
  ```
  IP와 S/M을 AND 통해 네트워크 주소를 구하면 10.8.0.0 이 된다.

  ```
  IP      = 10.8.255.0/16
  IP      = 10.  0000 1000. 1111 1111. 0000 0000
  S/M     = 255. 1111 1111. 0000 0000. 0000 0000
  Network = 10.  0000 1000. 0000 0000. 0000 0000
  ```
  IP와 S/M을 AND 통해 네트워크 주소를 구하면 10.8.0.0 이 된다.
  -> 두 아이피가 같은 네트워크 주소를 갖기 때문에 같은 네트워크에 속한다고 볼 수 있다.

- Q2. 10.8.143.1/20 과 10.8.144.1/20 은 같은 네트워크에 속하는가?
  ```
  IP       = 10.8.143.1/20
  IP(2진수) = 10 . 0000 1000. 1000 1111. 0000 0001
  S/M      = 255. 1111 1111. 1111 0000. 0000 0000
  Network  = 10.  0000 1000. 1000 0000. 0000 0000
  ```
  IP와 S/M을 AND 연산을 통해 네트워크 주소를 구하면 10.8.128.0이 된다.
  ```
  IP       = 10.8.144.1/20
  IP(2진수) = 10.  0000 1000. 1001 0000. 0000 0001
  S/M      = 255. 1111 1111. 1111 0000. 0000 0000
  Network  = 10.  0000 1000. 1001 0000. 0000 0000
  ```
  IP와 S/M을 AND 연산을 통해 네트워크 주소를 구하면 10.8.144.0이 된다.
  -> 두 아이피는 network 주소가 다르기 때문에 다른 네트워크에 속한다.

- Q3. 10.0.0.0/8을 가공해 한 네트워크에서 255대의 서버가 통신 가능 하도록 서브넷팅
  - 먼저 IP를 2진수로 풀어준다.
    ```
    IP  = 10.  0000 0000. 0000 0000. 0000 0000
    S/M = 255. 0000 0000. 0000 0000. 0000 0000
    ```
  - 255대의 호스트가 필요하기 때문에 뒤에서 부터 하나씩 계산해서 서브넷 마스크를 풀어준다. 주의할점은 브로드캐스트와 네트워크주소 때문에 24비트를 쓰더라도 2개의 호스트는 비워야 하는 점이다. 24비트시 가용한 IP 254개 임으로 23비트를 사용 하도록한다.
    ```
    IP  = 10.  0000 0000. 0000 0000. 0000 0000
    S/M = 255. 1111 1111. 1111 1110. 0000 0000
    ```
    10.0.0.0/8을 가공해 255대의 서버를 쓸 수 있도록 한 네트워크는 `10.0.0.0/23`이 된다.
- Q4. 10.0.0.0/8을 가공해 13개의 네트워크를 가지도록 서브넷팅
  - 먼저 IP를 2진수로 풀어준다.
    ```
    IP  = 10.  0000 0000. 0000 0000. 0000 0000
    S/M = 255. 0000 0000. 0000 0000. 0000 0000
    ```
  - 기본 네트워크로 8비트 서브넷을 부여 받았기 때문에 8비트 뒤부터 필요한 13개를 포함 할 수 있는 비트까지 1로 채운다. 13개가 들어가는 최소의 단위는 16개가 되는 4비트 이기 때문에 앞에서 부터 4개를 1로 채운다.
    ```
    IP  = 10.  0000 0000. 0000 0000. 0000 0000
    S/M = 255. 1111 0000. 0000 0000. 0000 0000
    ````
    10.0.0.0/8을 가공해 13개의 네트워크를 포함할 수 있는 네트워크를 구할 시 `10.0.0.0/12` 가 된다. 이는 13개를 포함 하는 네트워크를 구하는 서브넷팅 학습을 위해 구한 값이나, 실제 네트워크에서는 호스트가 많아지면 브로드캐스트 도메인이 커지기 때문에 경우에 따라 더 줄여줘야 할 수도 있다.
