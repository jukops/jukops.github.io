---
layout: post
title: "Serverless BaaS와 FaaS"
date: 2020-05-24 23:50:00
author: Juhyeok Bae
categories: Serverless
---
# Serverless란
Serverless 환경에 어플리케이션을 배포하면 개발자(고객)가 서버를 구성 하지 않아도 프로그램이 동작한다. 클라우드 업체에서 고객이 서버를 만들지 않아도 동작할 수 있도록 플랫폼을 제공 하며, 해당 플랫폼에 코드(바이너리)만 배포 하면 프로그램이 동작한다. 이 코드는 클라우드 쪽 서버에 배포 되며 고객의 인프라/런타임 설정 없이 동작한다.

# BaaS와 FaaS
클라우드가 보통 IaaS, PaaS, SaaS로 나뉘듯 서버리스도 크게 두가지로 분류가 가능하다. 기본적으로 서버 없이 프로그램을 동작 시키게 한다는점은 같지만, 사용하는 형태에 따라 BaaS와 FaaS로 구분이 된다.

- **BaaS (Backend as a Service)**  
개발에 필요한 기능들을 API로 제공해 주는것이다. 따라서 제공 해주는 API에 대해서 개발자가 백엔드 개발을 하지 않아도 된다.
기능을 편하게 쓰는것뿐 아니라 서버에서 이루어 지는 부가적인 요소들을 고민하지 않아도 된다. 런타임 구성, 보안, 확장성 등에 대한 고려가 필요 없다. GCP의 firebase가 BaaS에 해당 한다.
  - 장점  
    제공 하는 API에 대해 기능 개발이 필요 없어서 시간 절약이 가능하다. 서버 구성에 대한 보안이나 확장성 등을 고려 하지 않아도 된다.
  - 단점  
    백엔드는 BaaS를 사용하고 나머지 로직들은 클라이언트 단에서 구현된다. BaaS만 쓰고 백엔드를 따로 안두는 경우 백엔드 코드들이 클라이언트에 위치할 수 있다.  
    현재 나와 있는 솔루션을 보면 트레픽이 별로 없을 경우는 가격적으로 이득이지만, 트레픽이 많은 경우는 서버를 별도로 두는게 가격면에서 더 쌀수도 있다.

- **FaaS (Function as a Service)**  
코드 및 함수만 배포하면 서비스 가능 하도록 제공하는 것이다. 별도의 인프라 없이 코드만 배포 하면 서버가 동작 하게 된다. 계속 서버가 도는게 아니라 이벤트 발생 했을때만 동작 하기 때문에 보통 요청 단위로 과금이 진행 된다.  
AWS Lambda, Azure functions, GCP Functions 가 FaaS에 해당한다.
  - 장점  
    별도 인프라나 미들웨어 등의 런타임을 따로 구성 하지 않아도 되어 편리하다. 런타임 아래 레벨의 구성, 보안, 확장성등에 대한 많은 고민이 필요 없다.  
    이벤트 단위로 과금 됨으로 24시간 구동 되지 않는 cron 같은 특성의 프로그램들은 FaaS 형태로 사용 하는것이 비용 절감 효과가 있을 수 있다.
  - 단점  
    cold start 이슈가 있다. 트레픽이 없으면 서버가 꺼지기 떄문에 갑자기 호출 되거나 많은 트레픽이 들어 오면 클라우드 의 서버가 켜지고 준비 하는데 시간이 걸린다.  
    서버의 상태가 없는 이슈가 있다. 따로 점유하고 있는 서버가 없기 때문에 짧은 단위로 다른 서버에 프로그램이 배치 될 수 있다. 따라서 캐시 용도로 메모리에 뭔가를 저장해도 서버가 바뀌어 사용하기 힘들다.  
    로컬 파일시스템이 없다. 고객 점유의 서버가 아니기 때문에 보통 서버 내의 파일시스템을 제공 하지 않는다. 따라서 로컬 파일에 뭔가를 남기거나 읽는것이 힘들다. 필요하면 하드디스크가 아닌 s3 등의 다른 storage를 사용 해야 한다.

# 정리
Serverless를 사용하면 서버가 없어 인프라나 런타임을 구성 하지 않아도 되기 때문에 사용하기 편리하다. 하지만 내 소유의 서버가 아니기 때문에 마음대로 인프라/런타임을 구성 하거나 사용하는것이 힘들다. 그리고 트레픽이 대규모고 지속적으로 들어 온다면 직접 서버를 구성 해서 쓰는것이 비용적으로 저렴할 수 있다. 장/단점이 존재 하기 때문에 어플리케이션의 특성을 고려하여 사용 하는것이 필요하다.
